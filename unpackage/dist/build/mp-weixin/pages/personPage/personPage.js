(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personPage/personPage"],{3985:function(e,n,o){"use strict";o.r(n);var t=o("46e2"),r=o("6aed");for(var c in r)["default"].indexOf(c)<0&&function(e){o.d(n,e,(function(){return r[e]}))}(c);o("a274");var i=o("f0c5"),a=Object(i["a"])(r["default"],t["b"],t["c"],!1,null,"069badb0",null,!1,t["a"],void 0);n["default"]=a.exports},"46e2":function(e,n,o){"use strict";o.d(n,"b",(function(){return t})),o.d(n,"c",(function(){return r})),o.d(n,"a",(function(){}));var t=function(){var e=this.$createElement;this._self._c},r=[]},"6aed":function(e,n,o){"use strict";o.r(n);var t=o("7578"),r=o.n(t);for(var c in t)["default"].indexOf(c)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(c);n["default"]=r.a},7578:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{nickname:"",id:null}},onLoad:function(){this.initUserInfo()},onShow:function(){this.initUserInfo()},methods:{initUserInfo:function(){var n=this,o=e.getStorageSync("ctToken"),t=o.token,r=o.info.id;e.request({url:"http://81.68.99.212:8080/user/info/".concat(r),method:"GET",header:{Authorization:"Bearer "+t,"content-type":"application/x-www-form-urlencoded"},success:function(e){if(200===e.data.code){var o=e.data.data;n.id=o.id,n.nickname=o.nickname}else console.error("获取个人信息失败",e.data.msg)},fail:function(e){console.error("获取个人信息请求失败",e)}})},confirmLogout:function(){var n=this;e.showModal({title:"确认登出",content:"确定要登出吗？",success:function(e){e.confirm&&n.logout()}})},logout:function(){this.sendLogoutRequest()},sendLogoutRequest:function(){var n=e.getStorageSync("ctToken"),o=n.token;console.log(o),e.request({url:"http://81.68.99.212:8080/user/logout",method:"POST",header:{Authorization:"Bearer "+o,"content-type":"application/json"},success:function(n){200===n.data.code?(console.log("登出成功"),e.removeStorage({key:"ctToken",success:function(){console.log("本地存储的 token 已删除")},fail:function(e){console.error("删除本地存储的 token 失败",e)}}),e.redirectTo({url:"/pages/login/login"})):console.error("登出失败",n.data.msg)},fail:function(n){e.redirectTo({url:"/pages/login/login"}),console.error("登出请求失败",n)}})}}};n.default=o}).call(this,o("543d")["default"])},a274:function(e,n,o){"use strict";var t=o("de22"),r=o.n(t);r.a},a672:function(e,n,o){"use strict";(function(e,n){var t=o("4ea4");o("6e72");t(o("66fd"));var r=t(o("3985"));e.__webpack_require_UNI_MP_PLUGIN__=o,n(r.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},de22:function(e,n,o){}},[["a672","common/runtime","common/vendor"]]]);